var slider = new Slider('#frame-slider').on("slide",sliderUpdate);
function sliderUpdate(value){
	let fraction = parseFloat(value / 1000);
	let frame = parseInt(fraction * origami.getFrames().length);
	origami.setFrame(frame);
}

const animatedBlintzFold = {
	"file_spec": 1.1,
	"file_creator": "",
	"file_author": "",
	"file_classes": ["singleModel"],
	"frame_attributes": ["3D"],
	"frame_title": "blintz base",
	"frame_classes": ["creasePattern"],
	"vertices_coords": [
		[0.0, 0.0, 0.0], [0.5, 0.0, 0.0],
		[1.0, 0.0, 0.0], [1.0, 0.5, 0.0],
		[1.0, 1.0, 0.0], [0.5, 1.0, 0.0],
		[0.0, 1.0, 0.0], [0.0, 0.5, 0.0]
	],
	"edges_vertices": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0], [1,3], [3,5], [5,7], [7,1]],
	"edges_assignment": ["B","B","B","B","B","B","B","B","V","V","V","V"],
	"faces_vertices": [[0,1,7], [2,3,1], [4,5,3], [6,7,5], [1,3,5,7]],
	"faces_layer": [4,0,1,2,3],
	"file_frames": [
		{
			"frame_classes": ["foldedState"],
			"frame_parent": 0,
			"frame_inherit": true,
			"vertices_coords": [
				[0.0012038183319507678, 0.0012038183319507678, 0.02450428508239015], [0.5, 0.0, 0.0],
				[0.9987961816680493, 0.0012038183319507678, 0.02450428508239015], [1.0, 0.5, 0.0],
				[0.9987961816680493, 0.9987961816680493, 0.02450428508239015], [0.5, 1.0, 0.0],
				[0.0012038183319507678, 0.9987961816680493, 0.02450428508239015], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.004803679899192392, 0.004803679899192392, 0.04877258050403206], [0.5, 0.0, 0.0],
				[0.9951963201008076, 0.004803679899192392, 0.04877258050403206], [1.0, 0.5, 0.0],
				[0.9951963201008076, 0.9951963201008076, 0.04877258050403206], [0.5, 1.0, 0.0],
				[0.004803679899192392, 0.9951963201008076, 0.04877258050403206], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.010764916066947794, 0.010764916066947794, 0.07257116931361558], [0.5, 0.0, 0.0],
				[0.9892350839330522, 0.010764916066947794, 0.07257116931361558], [1.0, 0.5, 0.0],
				[0.9892350839330522, 0.9892350839330522, 0.07257116931361558], [0.5, 1.0, 0.0],
				[0.010764916066947794, 0.9892350839330522, 0.07257116931361558], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.019030116872178315, 0.019030116872178315, 0.09567085809127245], [0.5, 0.0, 0.0],
				[0.9809698831278217, 0.019030116872178315, 0.09567085809127245], [1.0, 0.5, 0.0],
				[0.9809698831278217, 0.9809698831278217, 0.09567085809127245], [0.5, 1.0, 0.0],
				[0.019030116872178315, 0.9809698831278217, 0.09567085809127245], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.029519683912911238, 0.029519683912911238, 0.11784918420649941], [0.5, 0.0, 0.0],
				[0.9704803160870887, 0.029519683912911238, 0.11784918420649941], [1.0, 0.5, 0.0],
				[0.9704803160870887, 0.9704803160870887, 0.11784918420649941], [0.5, 1.0, 0.0],
				[0.029519683912911238, 0.9704803160870887, 0.11784918420649941], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.04213259692436369, 0.04213259692436369, 0.13889255825490054], [0.5, 0.0, 0.0],
				[0.9578674030756363, 0.04213259692436369, 0.13889255825490054], [1.0, 0.5, 0.0],
				[0.9578674030756363, 0.9578674030756363, 0.13889255825490054], [0.5, 1.0, 0.0],
				[0.04213259692436369, 0.9578674030756363, 0.13889255825490054], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.05674738665931575, 0.05674738665931575, 0.15859832104091137], [0.5, 0.0, 0.0],
				[0.9432526133406842, 0.05674738665931575, 0.15859832104091137], [1.0, 0.5, 0.0],
				[0.9432526133406842, 0.9432526133406842, 0.15859832104091137], [0.5, 1.0, 0.0],
				[0.05674738665931575, 0.9432526133406842, 0.15859832104091137], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.0732233047033631, 0.0732233047033631, 0.17677669529663687], [0.5, 0.0, 0.0],
				[0.9267766952966369, 0.0732233047033631, 0.17677669529663687], [1.0, 0.5, 0.0],
				[0.9267766952966369, 0.9267766952966369, 0.17677669529663687], [0.5, 1.0, 0.0],
				[0.0732233047033631, 0.9267766952966369, 0.17677669529663687], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.09140167895908863, 0.09140167895908863, 0.19325261334068422], [0.5, 0.0, 0.0],
				[0.9085983210409114, 0.09140167895908863, 0.19325261334068422], [1.0, 0.5, 0.0],
				[0.9085983210409114, 0.9085983210409114, 0.19325261334068422], [0.5, 1.0, 0.0],
				[0.09140167895908863, 0.9085983210409114, 0.19325261334068422], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.11110744174509943, 0.11110744174509943, 0.2078674030756363], [0.5, 0.0, 0.0],
				[0.8888925582549005, 0.11110744174509943, 0.2078674030756363], [1.0, 0.5, 0.0],
				[0.8888925582549005, 0.8888925582549005, 0.2078674030756363], [0.5, 1.0, 0.0],
				[0.11110744174509943, 0.8888925582549005, 0.2078674030756363], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.13215081579350055, 0.13215081579350055, 0.22048031608708873], [0.5, 0.0, 0.0],
				[0.8678491842064995, 0.13215081579350055, 0.22048031608708873], [1.0, 0.5, 0.0],
				[0.8678491842064995, 0.8678491842064995, 0.22048031608708873], [0.5, 1.0, 0.0],
				[0.13215081579350055, 0.8678491842064995, 0.22048031608708873], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.15432914190872754, 0.15432914190872754, 0.23096988312782168], [0.5, 0.0, 0.0],
				[0.8456708580912724, 0.15432914190872754, 0.23096988312782168], [1.0, 0.5, 0.0],
				[0.8456708580912724, 0.8456708580912724, 0.23096988312782168], [0.5, 1.0, 0.0],
				[0.15432914190872754, 0.8456708580912724, 0.23096988312782168], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.17742883068638443, 0.17742883068638443, 0.23923508393305223], [0.5, 0.0, 0.0],
				[0.8225711693136155, 0.17742883068638443, 0.23923508393305223], [1.0, 0.5, 0.0],
				[0.8225711693136155, 0.8225711693136155, 0.23923508393305223], [0.5, 1.0, 0.0],
				[0.17742883068638443, 0.8225711693136155, 0.23923508393305223], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.20122741949596792, 0.20122741949596792, 0.2451963201008076], [0.5, 0.0, 0.0],
				[0.7987725805040321, 0.20122741949596792, 0.2451963201008076], [1.0, 0.5, 0.0],
				[0.7987725805040321, 0.7987725805040321, 0.2451963201008076], [0.5, 1.0, 0.0],
				[0.20122741949596792, 0.7987725805040321, 0.2451963201008076], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.2254957149176098, 0.2254957149176098, 0.2487961816680492], [0.5, 0.0, 0.0],
				[0.7745042850823902, 0.2254957149176098, 0.2487961816680492], [1.0, 0.5, 0.0],
				[0.7745042850823902, 0.7745042850823902, 0.2487961816680492], [0.5, 1.0, 0.0],
				[0.2254957149176098, 0.7745042850823902, 0.2487961816680492], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.25, 0.25, 0.25], [0.5, 0.0, 0.0],
				[0.75, 0.25, 0.25], [1.0, 0.5, 0.0],
				[0.75, 0.75, 0.25], [0.5, 1.0, 0.0],
				[0.25, 0.75, 0.25], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.27450428508239016, 0.27450428508239016, 0.24879618166804923], [0.5, 0.0, 0.0],
				[0.7254957149176098, 0.27450428508239016, 0.24879618166804923], [1.0, 0.5, 0.0],
				[0.7254957149176098, 0.7254957149176098, 0.24879618166804923], [0.5, 1.0, 0.0],
				[0.27450428508239016, 0.7254957149176098, 0.24879618166804923], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.29877258050403205, 0.29877258050403205, 0.2451963201008076], [0.5, 0.0, 0.0],
				[0.701227419495968, 0.29877258050403205, 0.2451963201008076], [1.0, 0.5, 0.0],
				[0.701227419495968, 0.701227419495968, 0.2451963201008076], [0.5, 1.0, 0.0],
				[0.29877258050403205, 0.701227419495968, 0.2451963201008076], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.3225711693136155, 0.3225711693136155, 0.23923508393305223], [0.5, 0.0, 0.0],
				[0.6774288306863845, 0.3225711693136155, 0.23923508393305223], [1.0, 0.5, 0.0],
				[0.6774288306863845, 0.6774288306863845, 0.23923508393305223], [0.5, 1.0, 0.0],
				[0.3225711693136155, 0.6774288306863845, 0.23923508393305223], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.3456708580912724, 0.3456708580912724, 0.23096988312782168], [0.5, 0.0, 0.0],
				[0.6543291419087276, 0.3456708580912724, 0.23096988312782168], [1.0, 0.5, 0.0],
				[0.6543291419087276, 0.6543291419087276, 0.23096988312782168], [0.5, 1.0, 0.0],
				[0.3456708580912724, 0.6543291419087276, 0.23096988312782168], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.3678491842064994, 0.3678491842064994, 0.22048031608708876], [0.5, 0.0, 0.0],
				[0.6321508157935005, 0.3678491842064994, 0.22048031608708876], [1.0, 0.5, 0.0],
				[0.6321508157935005, 0.6321508157935005, 0.22048031608708876], [0.5, 1.0, 0.0],
				[0.3678491842064994, 0.6321508157935005, 0.22048031608708876], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.3888925582549005, 0.3888925582549005, 0.20786740307563634], [0.5, 0.0, 0.0],
				[0.6111074417450995, 0.3888925582549005, 0.20786740307563634], [1.0, 0.5, 0.0],
				[0.6111074417450995, 0.6111074417450995, 0.20786740307563634], [0.5, 1.0, 0.0],
				[0.3888925582549005, 0.6111074417450995, 0.20786740307563634], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.4085983210409113, 0.4085983210409113, 0.19325261334068428], [0.5, 0.0, 0.0],
				[0.5914016789590887, 0.4085983210409113, 0.19325261334068428], [1.0, 0.5, 0.0],
				[0.5914016789590887, 0.5914016789590887, 0.19325261334068428], [0.5, 1.0, 0.0],
				[0.4085983210409113, 0.5914016789590887, 0.19325261334068428], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.42677669529663687, 0.42677669529663687, 0.1767766952966369], [0.5, 0.0, 0.0],
				[0.5732233047033631, 0.42677669529663687, 0.1767766952966369], [1.0, 0.5, 0.0],
				[0.5732233047033631, 0.5732233047033631, 0.1767766952966369], [0.5, 1.0, 0.0],
				[0.42677669529663687, 0.5732233047033631, 0.1767766952966369], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.4432526133406842, 0.4432526133406842, 0.15859832104091137], [0.5, 0.0, 0.0],
				[0.5567473866593158, 0.4432526133406842, 0.15859832104091137], [1.0, 0.5, 0.0],
				[0.5567473866593158, 0.5567473866593158, 0.15859832104091137], [0.5, 1.0, 0.0],
				[0.4432526133406842, 0.5567473866593158, 0.15859832104091137], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.45786740307563634, 0.45786740307563634, 0.13889255825490054], [0.5, 0.0, 0.0],
				[0.5421325969243637, 0.45786740307563634, 0.13889255825490054], [1.0, 0.5, 0.0],
				[0.5421325969243637, 0.5421325969243637, 0.13889255825490054], [0.5, 1.0, 0.0],
				[0.45786740307563634, 0.5421325969243637, 0.13889255825490054], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.47048031608708873, 0.47048031608708873, 0.11784918420649947], [0.5, 0.0, 0.0],
				[0.5295196839129113, 0.47048031608708873, 0.11784918420649947], [1.0, 0.5, 0.0],
				[0.5295196839129113, 0.5295196839129113, 0.11784918420649947], [0.5, 1.0, 0.0],
				[0.47048031608708873, 0.5295196839129113, 0.11784918420649947], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.4809698831278217, 0.4809698831278217, 0.09567085809127247], [0.5, 0.0, 0.0],
				[0.5190301168721783, 0.4809698831278217, 0.09567085809127247], [1.0, 0.5, 0.0],
				[0.5190301168721783, 0.5190301168721783, 0.09567085809127247], [0.5, 1.0, 0.0],
				[0.4809698831278217, 0.5190301168721783, 0.09567085809127247], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.4892350839330522, 0.4892350839330522, 0.0725711693136156], [0.5, 0.0, 0.0],
				[0.5107649160669478, 0.4892350839330522, 0.0725711693136156], [1.0, 0.5, 0.0],
				[0.5107649160669478, 0.5107649160669478, 0.0725711693136156], [0.5, 1.0, 0.0],
				[0.4892350839330522, 0.5107649160669478, 0.0725711693136156], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.4951963201008076, 0.4951963201008076, 0.04877258050403215], [0.5, 0.0, 0.0],
				[0.5048036798991924, 0.4951963201008076, 0.04877258050403215], [1.0, 0.5, 0.0],
				[0.5048036798991924, 0.5048036798991924, 0.04877258050403215], [0.5, 1.0, 0.0],
				[0.4951963201008076, 0.5048036798991924, 0.04877258050403215], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.4987961816680492, 0.4987961816680492, 0.024504285082390206], [0.5, 0.0, 0.0],
				[0.5012038183319508, 0.4987961816680492, 0.024504285082390206], [1.0, 0.5, 0.0],
				[0.5012038183319508, 0.5012038183319508, 0.024504285082390206], [0.5, 1.0, 0.0],
				[0.4987961816680492, 0.5012038183319508, 0.024504285082390206], [0.0, 0.5, 0.0]
			]
		},
		{
			"frame_classes": ["foldedState"],
			"frame_parent":0,
			"frame_inherit":true,
			"vertices_coords": [
				[0.5, 0.5, 0.0], [0.5, 0.0, 0.0],
				[0.5, 0.5, 0.0], [1.0, 0.5, 0.0],
				[0.5, 0.5, 0.0], [0.5, 1.0, 0.0],
				[0.5, 0.5, 0.0], [0.0, 0.5, 0.0]
			]
		}
	]
};

let fishBase = {
	"file_spec": 1.1,
	"frame_title": "fish base",
	"file_classes": ["singleModel"],
	"frame_classes": ["creasePattern"],
	"frame_attributes": ["2D"],
	"vertices_coords": [[0,0],[1,0],[1,1],[0,1],[0.292893218813452,0.292893218813452],[0.707106781186548,0.707106781186548],[0.292893218813452,0],[1,0.707106781186548]],
	"faces_vertices": [[2,3,5],[3,0,4],[3,1,5],[1,3,4],[4,0,6],[1,4,6],[5,1,7],[2,5,7]],
	"edges_vertices": [[2,3],[3,0],[3,1],[0,4],[1,4],[3,4],[1,5],[2,5],[3,5],[4,6],[0,6],[6,1],[5,7],[1,7],[7,2]],
	"faces_layer": [2,3,5,6,4,7,0,1],
	"edges_assignment": ["B","B","V","M","M","M","M","M","M","V","B","B","V","B","B"],
	"file_frames": [{
		"frame_classes": ["foldedState"],
		"frame_parent":0,
		"frame_inherit":true,
		"vertices_coords": [[0.707106781186548,0.292893218813452],[1,0],[0.707106781186548,0.292893218813452],[0,1],[0.292893218813452,0.292893218813452],[0.707106781186548,0.707106781186548],[0.5,0.5],[0.5,0.5]]
	}]
};


var div = document.getElementsByClassName('canvases')[0];

var origami = new Origami(div, animatedBlintzFold).setPadding(0.02);

origami.onMouseMove = function(event){
/*
	var nearest = this.cp.nearest(event.point);
	// if(nearest.node !== undefined){ this.nodes[nearest.node.index].visible = true; }
	if(nearest.edge !== undefined){
		this.addClass(this.get(nearest.edge), 'stroke-yellow');
	}
	// if(nearest.face !== undefined){ this.faces[nearest.face.index].fillColor = this.styles.byrne.yellow}
	// if(nearest.sector !== undefined){ this.sectors[nearest.sector.index].fillColor.alpha = 1.0; }
*/
}
origami.onMouseDown = function(event){
/*
	var nearest = this.cp.nearest(event.point);
	// if(nearest.edge){ console.log(nearest.edge); }
*/
}
// IMPORT / EXPORT
creasePatternDidUpload = function(cp){
	origami.cp = cp;
	origami.draw();
	updateFoldedState(origami.cp);
}
function updateFoldedState(cp){
	// origami.cp = cp.copy();
	// origami.draw();
	// origami.style = { face:{ fillColor:{ gray:0.0, alpha:0.1 } } };
	// origami.update();
}
document.getElementById("download-cp-svg").addEventListener("click", function(e){
	e.preventDefault();
	downloadCreasePattern(origami.cp, "creasepattern", "svg");
});
document.getElementById("download-cp-fold").addEventListener("click", function(e){
	e.preventDefault();
	downloadCreasePattern(origami.cp, "creasepattern", "fold");
});
document.getElementById("download-cp-opx").addEventListener("click", function(e){
	e.preventDefault();
	downloadCreasePattern(origami.cp, "creasepattern", "opx");
});
document.getElementById("download-folded-svg").addEventListener("click", function(e){
	e.preventDefault();
	downloadFolded(origami.cp, "folded", "svg");
});
document.getElementById("download-folded-fold").addEventListener("click", function(e){
	e.preventDefault();
	downloadFolded(origami.cp, "folded", "fold");
});


